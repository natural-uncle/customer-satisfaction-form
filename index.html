<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>è‡ªç„¶å¤§å”æ¸…æ´—æœå‹™ï½œé¡§å®¢æ»¿æ„åº¦èª¿æŸ¥</title>

<style>
/* === ä¸»è¦æ¨£å¼ï¼ˆä¿ç•™ä½ åŸæœ¬çš„è¨­è¨ˆï¼‰ === */
body{font-family:"Microsoft JhengHei",sans-serif;background:#f9faf9;color:#333;margin:0}
.container{max-width:800px;margin:20px auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1)}
.logo{text-align:center;margin-bottom:20px}
.logo img{max-width:100%;border-radius:12px}
h2{text-align:center;color:#3a6d4f;margin:10px 0;font-size:2rem}
p{line-height:1.7;color:#555;font-size:1.05rem}
.form-group{margin-bottom:20px}
label{font-weight:bold;display:block;margin-bottom:8px;color:#3a6d4f;font-size:1.1rem}
.options label{display:block;margin:5px 0}
textarea,input[type=text]{width:100%;box-sizing:border-box;padding:14px;border:1px solid #ccc;border-radius:8px;font-size:1rem;resize:vertical;margin-top:8px}
input[type=range]{width:100%}
button{background:#3a6d4f;color:#fff;border:0;padding:14px 20px;font-size:1.1rem;border-radius:8px;cursor:pointer;display:block;margin:0 auto}
button:hover{background:#2d523c}
.contact{margin-top:30px;padding:20px;background:#f1f9f1;border-radius:12px;font-size:1rem;text-align:center}
.footer{text-align:center;margin-top:40px;font-size:.95rem;color:#777}
.progress-container{background:#e0e0e0;border-radius:20px;margin:20px 0;height:20px;width:100%;overflow:hidden}
.progress-bar{height:100%;background:#3a6d4f;width:0%;transition:width .3s ease}
.theme-toggle{position:fixed;top:15px;right:15px;background:#3a6d4f;color:#fff;border:0;border-radius:50%;width:42px;height:42px;cursor:pointer;font-size:18px;z-index:1000}
body.dark{background:#121212;color:#eee}
body.dark .container{background:#1e1e1e;box-shadow:0 4px 12px rgba(0,0,0,.6)}
body.dark h2,body.dark label{color:#9ad0b1}
body.dark p{color:#ccc}
body.dark textarea,body.dark input[type=text],body.dark input[type=range]{background:#2a2a2a;color:#eee;border:1px solid #555}
body.dark button{background:#4da67a}
body.dark button:hover{background:#3b7e5b}
body.dark .progress-container{background:#333}
body.dark .progress-bar{background:#4da67a}
body.dark .contact{background:#2a2a2a;color:#ccc}
body.dark .footer{color:#aaa}

/* === ç¤¾ç¾¤æŒ‰éˆ•ï¼šé å°¾æ¨£å¼ === */
.social-bar{
  display:flex; gap:14px; justify-content:center; align-items:stretch; flex-wrap:wrap;
  margin-top:14px;
}
.social-btn{
  display:inline-flex; align-items:center; gap:10px;
  padding:12px 16px; border-radius:12px; text-decoration:none; font-weight:700;
  box-shadow:0 6px 18px rgba(0,0,0,.12);
  transition:transform .15s ease, box-shadow .15s ease, filter .2s ease;
  border:1px solid rgba(0,0,0,.06);
}
.social-btn:active{ transform:translateY(1px) }
.social-btn:hover{ box-shadow:0 10px 24px rgba(0,0,0,.16) }
.social-btn svg{ width:22px; height:22px; flex:0 0 22px }
.btn-line{ background:#06c755; color:#fff }
.btn-fb{ background:#1877f2; color:#fff }
.btn-light{ background:#fff; color:#333 }
.btn-outline{ background:transparent; color:inherit; border:1px solid currentColor }

/* äº®/æš—ä¸»é¡Œå¾®èª¿ï¼ˆè®“æŒ‰éˆ•å°æ¯”æ›´å¥½çœ‹ï¼‰ */
body.dark .btn-line{ background:#11d167 }
body.dark .btn-fb{ background:#2d82f6 }
body.dark .social-btn{ border-color:rgba(255,255,255,.1) }

/* è¡Œå‹•ç‰ˆï¼šä¸Šä¸‹é¡¯ç¤º */
@media (max-width:600px){
  .container{margin:10px;padding:18px;border-radius:10px}
  h2{font-size:1.5rem}
  p,label{font-size:1.05rem;line-height:1.6}
  input[type=text],textarea{font-size:1.05rem;padding:14px}
  button{width:100%;padding:16px;font-size:1.15rem}
  .social-bar{flex-direction:column}
  .social-btn{justify-content:center}
}

/* === å¯æ‹–æ›³çš„æµ®å‹•ç¤¾ç¾¤æŒ‰éˆ•ï¼ˆå¯ç§»å‹•ä½ç½®ï¼‰ === */
.social-fab{
  position:fixed; right:20px; bottom:20px; display:flex; gap:10px; align-items:center;
  z-index:999; user-select:none; touch-action:none;
}
@media (max-width:600px){
  .social-fab{ flex-direction:column }
}
.fab-card{
  display:flex; gap:10px; padding:10px; background:#ffffffcc; backdrop-filter:blur(6px);
  border:1px solid rgba(0,0,0,.08); border-radius:16px; box-shadow:0 8px 24px rgba(0,0,0,.18);
}
body.dark .fab-card{ background:#1e1e1ecc; border-color:rgba(255,255,255,.1) }
.fab-handle{
  cursor:grab; align-self:stretch; display:flex; align-items:center; padding:0 6px;
  color:#888
}
.fab-handle:active{ cursor:grabbing }
.fab-handle svg{ width:18px; height:18px }

/* å°åœ“å½¢æŒ‰éˆ•è®Šé«”ï¼ˆæµ®å‹•ç‰ˆæ›´ä¿è½ï¼‰ */
.fab .social-btn{
  padding:12px; border-radius:14px; box-shadow:none
}
.fab .social-btn span{ display:none } /* æµ®å‹•ç‰ˆåªé¡¯ç¤ºåœ–ç¤ºï¼Œä¿ç•™å¯åŠæ€§æ–‡å­— */
.fab .social-btn svg{ width:22px; height:22px }
</style>
</head>
<body>
<button class="theme-toggle" id="themeToggle">ğŸŒ™</button>

<div class="container">
  <div class="logo"><img src="ChatGPT.png" alt="è‡ªç„¶å¤§å”æ¸…æ´—æœå‹™ é¡§å®¢æ»¿æ„åº¦èª¿æŸ¥"/></div>
  <h2>èª æ‘¯é‚€è«‹æ‚¨å¡«å¯«æ»¿æ„åº¦èª¿æŸ¥</h2>
  <p>æ„Ÿè¬æ‚¨é¸æ“‡ <b>è‡ªç„¶å¤§å”å°ˆæ¥­å®¶é›»æ¸…æ´—æœå‹™</b>ï¼æˆ‘å€‘è‡´åŠ›æä¾›å®‰å¿ƒã€æ”¾å¿ƒçš„æ¸…æ´—é«”é©—ã€‚</p>

  <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>

  <form id="surveyForm" method="POST" action="/api/submit">
    <div class="form-group">
      <label>ğŸ‘¤ è«‹ç•™ä¸‹æ‚¨çš„å§“åæˆ– LINE ID</label>
      <input type="text" name="customer_name" placeholder="è¼¸å…¥å§“åæˆ– LINE ID"/>
    </div>

    <div class="form-group">
      <label>1. æ‚¨å°é€™æ¬¡çš„æ¸…æ´—æœå‹™æ•´é«”é«”é©—æ„Ÿè¦ºå¦‚ä½•ï¼Ÿ</label>
      <div class="options">
        <label><input type="radio" name="q1" value="éå¸¸æ»¿æ„"/> éå¸¸æ»¿æ„</label>
        <label><input type="radio" name="q1" value="æ»¿æ„"/> æ»¿æ„</label>
        <label><input type="radio" name="q1" value="æ™®é€š"/> æ™®é€š</label>
        <label><input type="radio" name="q1" value="ä¸å¤ªæ»¿æ„"/> ä¸å¤ªæ»¿æ„</label>
        <label><input type="radio" name="q1" value="éå¸¸ä¸æ»¿æ„"/> éå¸¸ä¸æ»¿æ„</label>
      </div>
    </div>

    <div class="form-group">
      <label>2. æ‚¨å°æœå‹™äººå“¡çš„å°ˆæ¥­ç¨‹åº¦æ˜¯å¦æ»¿æ„ï¼Ÿ</label>
      <div class="options">
        <label><input type="radio" name="q2" value="éå¸¸æ»¿æ„"/> éå¸¸æ»¿æ„</label>
        <label><input type="radio" name="q2" value="æ»¿æ„"/> æ»¿æ„</label>
        <label><input type="radio" name="q2" value="æ™®é€š"/> æ™®é€š</label>
        <label><input type="radio" name="q2" value="ä¸å¤ªæ»¿æ„"/> ä¸å¤ªæ»¿æ„</label>
        <label><input type="radio" name="q2" value="éå¸¸ä¸æ»¿æ„"/> éå¸¸ä¸æ»¿æ„</label>
      </div>
      <textarea name="q2_extra" placeholder="è‹¥æœ‰ç‰¹åˆ¥å°è±¡æˆ–å»ºè­°ï¼Œè«‹å¡«å¯«..."></textarea>
    </div>

    <div class="form-group">
      <label>3. æ‚¨èªç‚ºæœå‹™äººå“¡çš„æ•´é«”è¡¨ç¾å¦‚ä½•ï¼Ÿ</label>
      <div class="note">ï¼ˆ1åˆ†=éå¸¸ä¸æ»¿æ„ï¼Œ5åˆ†=éå¸¸æ»¿æ„ï¼‰</div>
      <div class="options">
        <label><input type="radio" name="q3" value="1"/> 1 åˆ†</label>
        <label><input type="radio" name="q3" value="2"/> 2 åˆ†</label>
        <label><input type="radio" name="q3" value="3"/> 3 åˆ†</label>
        <label><input type="radio" name="q3" value="4"/> 4 åˆ†</label>
        <label><input type="radio" name="q3" value="5"/> 5 åˆ†</label>
      </div>
    </div>

    <div class="form-group">
      <label>4. è‹¥æœ‹å‹æˆ–åŒäº‹æœ‰éœ€è¦ï¼Œæ‚¨é¡˜æ„æ¨è–¦è‡ªç„¶å¤§å”çš„æ¸…æ´—æœå‹™å—ï¼Ÿ</label>
      <div class="note">ï¼ˆ1åˆ†=å®Œå…¨ä¸æœƒæ¨è–¦ï¼Œ10åˆ†=ä¸€å®šæœƒæ¨è–¦ï¼‰</div>
      <input type="range" name="q4" min="1" max="10" value="5" oninput="this.nextElementSibling.value=this.value"/>
      <output>5</output>
    </div>

    <div class="form-group">
      <label>5. æœªä¾†æ˜¯å¦æœƒå†æ¬¡å§”è¨—è‡ªç„¶å¤§å”é€²è¡Œå®¶é›»æ¸…æ´—æœå‹™ï¼Ÿ</label>
      <div class="options">
        <label><input type="radio" name="q5" value="ä¸€å®šæœƒ"/> ä¸€å®šæœƒ</label>
        <label><input type="radio" name="q5" value="æœ‰éœ€è¦æœƒè€ƒæ…®"/> æœ‰éœ€è¦æœƒè€ƒæ…®</label>
        <label><input type="radio" name="q5" value="å¯èƒ½ä¸æœƒ"/> å¯èƒ½ä¸æœƒ</label>
        <label><input type="radio" name="q5" value="ä¸æœƒ"/> ä¸æœƒ</label>
      </div>
    </div>

    <div class="form-group">
      <label>6. æ‚¨å°æˆ‘å€‘çš„æœå‹™æœ‰ä»»ä½•æƒ³æ³•ã€é¼“å‹µæˆ–å»ºè­°å—ï¼Ÿ</label>
      <textarea name="q6" placeholder="ğŸ“ è«‹è‡ªç”±å¡«å¯«æ‚¨çš„å»ºè­°..."></textarea>
    </div>

    <button type="submit">é€å‡ºè¡¨å–®</button>
  </form>

  <div class="contact">
    <h3>ğŸ“± è¯çµ¡æˆ‘å€‘ï½œè‡ªç„¶å¤§å”</h3>

    <!-- é å°¾ç‰ˆï¼šç¾åŒ–å¾Œçš„æŒ‰éˆ•ï¼ˆæ¡Œæ©Ÿå·¦å³ã€æ‰‹æ©Ÿä¸Šä¸‹ï¼‰ -->
    <div class="social-bar" aria-label="å®˜æ–¹ç¤¾ç¾¤é€£çµ">
      <a class="social-btn btn-line" href="https://lin.ee/OHk6Rn7" target="_blank" rel="noopener" aria-label="LINE å®˜æ–¹å¸³è™Ÿ">
        <!-- LINE SVG -->
        <svg viewBox="0 0 40 40" aria-hidden="true"><path fill="currentColor" d="M20 4C10.6 4 3 10.6 3 18.6c0 5.5 3.7 10.2 9.1 12.5-.4 1.6-1.6 6-1.8 6.8-.3 1.1.4 1.1 1 .8.4-.2 6.2-4.2 8.7-5.9.6 0 1.2.1 1.8.1 9.4 0 17-6.6 17-14.6S29.4 4 20 4zM12 22.2v-7.7h2.1v5.9h3.1v1.8H12zm6.6 0v-7.7h2.1v7.7h-2.1zm8.5 0l-3.8-5.6v5.6h-2v-7.7h2l3.8 5.6v-5.6h2v7.7h-2z"/></svg>
        <span>LINE å®˜æ–¹å¸³è™Ÿ</span>
      </a>

      <a class="social-btn btn-fb" href="https://www.facebook.com/naturaluncle" target="_blank" rel="noopener" aria-label="Facebook ç²‰çµ²å°ˆé ">
        <!-- Facebook SVG -->
        <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M22 12.06C22 6.53 17.52 2 12 2S2 6.53 2 12.06c0 5.01 3.66 9.16 8.44 9.94v-7.03H7.9v-2.91h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.24.2 2.24.2v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.87h2.78l-.44 2.91h-2.34V22c4.78-.78 8.44-4.93 8.44-9.94Z"/></svg>
        <span>Facebook ç²‰çµ²å°ˆé </span>
      </a>
    </div>
  </div>
  <div class="footer">Â© 2025 è‡ªç„¶å¤§å”ï½œå°ˆæ¥­å®¶é›»æ¸…æ´—æœå‹™</div>
</div>

<!-- æµ®å‹•ç‰ˆï¼šå¯è‡ªç”±ç§»å‹•ä½ç½®ï¼ˆé è¨­å³ä¸‹ï¼‰ -->
<div class="social-fab fab" id="socialFab" role="complementary" aria-label="å¿«é€Ÿç¤¾ç¾¤é€£çµï¼ˆå¯æ‹–æ›³ï¼‰">
  <div class="fab-card">
    <div class="fab-handle" id="fabHandle" title="æ‹–æ›³ç§»å‹•">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path fill="currentColor" d="M10 4h4v2h-4V4Zm0 7h4v2h-4v-2Zm0 7h4v2h-4v-2Z"/>
      </svg>
    </div>
    <a class="social-btn btn-line" href="https://lin.ee/OHk6Rn7" target="_blank" rel="noopener" title="LINE å®˜æ–¹å¸³è™Ÿ">
      <svg viewBox="0 0 40 40" aria-hidden="true"><path fill="currentColor" d="M20 4C10.6 4 3 10.6 3 18.6c0 5.5 3.7 10.2 9.1 12.5-.4 1.6-1.6 6-1.8 6.8-.3 1.1.4 1.1 1 .8.4-.2 6.2-4.2 8.7-5.9.6 0 1.2.1 1.8.1 9.4 0 17-6.6 17-14.6S29.4 4 20 4zM12 22.2v-7.7h2.1v5.9h3.1v1.8H12zm6.6 0v-7.7h2.1v7.7h-2.1zm8.5 0l-3.8-5.6v5.6h-2v-7.7h2l3.8 5.6v-5.6h2v7.7h-2z"/></svg>
      <span>LINE</span>
    </a>
    <a class="social-btn btn-fb" href="https://www.facebook.com/naturaluncle" target="_blank" rel="noopener" title="Facebook ç²‰çµ²å°ˆé ">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M22 12.06C22 6.53 17.52 2 12 2S2 6.53 2 12.06c0 5.01 3.66 9.16 8.44 9.94v-7.03H7.9v-2.91h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.24.2 2.24.2v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.87h2.78l-.44 2.91h-2.34V22c4.78-.78 8.44-4.93 8.44-9.94Z"/></svg>
      <span>Facebook</span>
    </a>
  </div>
</div>

<div id="loadingBackdrop"><div class="loading-card"><span class="spinner"></span>è³‡æ–™é€å‡ºä¸­ï¼Œè«‹ç¨å€™â€¦</div></div>

<script>
// é€²åº¦æ¢
(function(){
  var form=document.getElementById("surveyForm");
  var progressBar=document.getElementById("progressBar");
  function update(){
    var answered=0,total=7;
    form.querySelectorAll("input,textarea").forEach(function(el){
      if((el.type==="radio"&&el.checked)||(el.type==="text"&&el.value.trim()!=="")||(el.type==="range"&&el.value)||(el.tagName==="TEXTAREA"&&el.value.trim()!=="")) answered++;
    });
    progressBar.style.width=Math.min(answered/total*100,100)+"%";
  }
  form.addEventListener("input",update);
})();

// ä¸»é¡Œåˆ‡æ›
(function(){
  var btn=document.getElementById("themeToggle");
  function setTheme(t){document.body.classList.toggle("dark",t==="dark");btn.textContent=t==="dark"?"â˜€ï¸":"ğŸŒ™";localStorage.setItem("theme",t);}
  btn.addEventListener("click",function(){setTheme(document.body.classList.contains("dark")?"light":"dark");});
  var saved=localStorage.getItem("theme");
  setTheme(saved?saved:(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));
})();

// æäº¤ï¼ˆfetch â†’ /api/submitï¼›ä»»ä½• 2xx è¦–ç‚ºæˆåŠŸï¼‰
(function(){
  var form=document.getElementById("surveyForm");
  var backdrop=document.getElementById("loadingBackdrop");
  var submitBtn=form.querySelector('[type="submit"]');

  function showLoading(b){backdrop.classList[b?"add":"remove"]("show");}
  function setSubmitting(b){
    if(!submitBtn) return;
    submitBtn.disabled=!!b;
    if(b){
      if(!submitBtn.dataset.origtxt) submitBtn.dataset.origtxt=submitBtn.textContent.trim();
      submitBtn.textContent="é€å‡ºä¸­â€¦";
    }else{
      if(submitBtn.dataset.origtxt) submitBtn.textContent=submitBtn.dataset.origtxt;
    }
  }

  form.addEventListener("submit",function(e){
    e.preventDefault();

    var fd=new FormData(form);
    var payload={};
    fd.forEach(function(v,k){
      if(payload[k]!==undefined) payload[k]=[].concat(payload[k],v);
      else payload[k]=v;
    });
    payload.userAgent=navigator.userAgent;
    payload.submittedAt=new Date().toISOString();

    setSubmitting(true); showLoading(true);

    fetch("/api/submit",{
      method:"POST",
      headers:{ "content-type":"application/json" },
      body:JSON.stringify(payload)
    })
    .then(async function(res){
      if(res.ok) return {ok:true};
      var txt=""; try{ txt=await res.text(); }catch(e){}
      throw new Error("HTTP "+res.status+(txt?(": "+txt):""));
    })
    .then(function(){
      window.location.href="thankyou.html";
    })
    .catch(function(err){
      if (confirm("é€å‡ºå¯èƒ½æˆåŠŸï¼Œä½†å›æ‡‰æ ¼å¼ç•°å¸¸ã€‚\\nè¦å‰å¾€å®Œæˆé å—ï¼Ÿ\\n\\nè©³ç´°ï¼š"+(err&&err.message?err.message:err))) {
        window.location.href="thankyou.html";
        return;
      }
      alert("é€å‡ºå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚\\nåŸå› ï¼š"+(err&&err.message?err.message:err));
    })
    .finally(function(){ setSubmitting(false); showLoading(false); });
  },{once:true});
})();

// === æµ®å‹•ç¤¾ç¾¤æŒ‰éˆ•ï¼šæ‹–æ›³ç§»å‹•èˆ‡ä½ç½®ä¿å­˜ï¼ˆæœ¬åœ°å„²å­˜ï¼‰ ===
(function(){
  var fab=document.getElementById('socialFab');
  var handle=document.getElementById('fabHandle');
  if(!fab||!handle) return;

  var startX=0,startY=0,origX=0,origY=0, dragging=false;

  function setPos(x,y){
    fab.style.right='auto'; fab.style.bottom='auto';
    fab.style.left=x+'px'; fab.style.top=y+'px';
  }

  // è¼‰å…¥å„²å­˜ä½ç½®
  try{
    var pos=JSON.parse(localStorage.getItem('socialFabPos')||'null');
    if(pos && typeof pos.x==='number' && typeof pos.y==='number'){ setPos(pos.x,pos.y); }
  }catch(e){}

  function onStart(e){
    dragging=true;
    var rect=fab.getBoundingClientRect();
    origX=rect.left; origY=rect.top;
    if(e.touches && e.touches[0]){ startX=e.touches[0].clientX; startY=e.touches[0].clientY; }
    else{ startX=e.clientX; startY=e.clientY; }
    e.preventDefault();
  }
  function onMove(e){
    if(!dragging) return;
    var cx=e.touches && e.touches[0]? e.touches[0].clientX : e.clientX;
    var cy=e.touches && e.touches[0]? e.touches[0].clientY : e.clientY;
    var x=origX+(cx-startX), y=origY+(cy-startY);
    // é‚Šç•Œé™åˆ¶
    var vw=window.innerWidth, vh=window.innerHeight;
    var w=fab.offsetWidth, h=fab.offsetHeight;
    x=Math.max(6, Math.min(x, vw-w-6));
    y=Math.max(6, Math.min(y, vh-h-6));
    setPos(x,y);
  }
  function onEnd(){
    if(!dragging) return;
    dragging=false;
    var rect=fab.getBoundingClientRect();
    localStorage.setItem('socialFabPos', JSON.stringify({x:rect.left, y:rect.top}));
  }

  handle.addEventListener('mousedown', onStart);
  window.addEventListener('mousemove', onMove);
  window.addEventListener('mouseup', onEnd);

  handle.addEventListener('touchstart', onStart, {passive:false});
  window.addEventListener('touchmove', onMove, {passive:false});
  window.addEventListener('touchend', onEnd);
})();
</script>
</body>
</html>
